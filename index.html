<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>è€æŸ¥çš„æ¯æ—¥å…¨çƒå¸‚å ´èˆ‡æ–°èç¸½è¦½</title>
  <style>
    body{
      font-family:-apple-system, BlinkMacSystemFont, "Microsoft JhengHei", "Noto Sans TC", system-ui, sans-serif;
      padding:20px; background:#fafafa;
    }
    h1{font-size:1.6rem;margin-bottom:6px;}
    .updated{color:#666;margin-bottom:15px;}
    .card{
      background:#fff;padding:15px;margin:12px 0;border-radius:10px;
      box-shadow:0 2px 6px rgba(0,0,0,0.05);
    }
    .card h2{font-size:1.2rem;margin-bottom:10px;}
    .item{margin-bottom:8px;}
    .meta{color:#888;font-size:0.85rem;}
    a{color:#0066cc;}
  </style>
</head>
<body>
  <h1>ğŸŒ æ¯æ—¥å…¨çƒå¸‚å ´ / æ”¿ç¶“ / æ–°èç¸½è¦½</h1>
  <div class="updated">æœ€å¾Œæ›´æ–°ï¼š<span id="updated">-</span></div>

  <div class="card">
    <h2>ğŸ“ˆ ä¸–ç•Œä¸»è¦è‚¡å¸‚æŒ‡æ•¸</h2>
    <div id="indices"></div>
  </div>

  <div class="card">
    <h2>ğŸŒ æ”¿ç¶“è¦é»</h2>
    <div id="economy"></div>
  </div>

  <div class="card">
    <h2>ğŸ“° å…¨çƒé‡å¤§æ–°è</h2>
    <div id="news"></div>
  </div>

<script>
async function load(){
  try{
    const r = await fetch('./data/data.json', {cache:"no-store"});
    const j = await r.json();

    document.getElementById("updated").textContent = j.updated_local || "-";

    // æŒ‡æ•¸
    const idx = document.getElementById("indices");
    idx.innerHTML = (j.indices||[]).map(i=>`
      <div class="item">
        <strong>${i.name}</strong>ï¼š${i.price} ï¼ˆ${i.change_pct}%ï¼‰
        <div class="meta">${i.time}</div>
      </div>
    `).join('');

    // æ”¿ç¶“
    const eco = document.getElementById("economy");
    eco.innerHTML = (j.economy||[]).map(e=>`<div class="item">${e}</div>`).join('');

    // æ–°è
    const nw = document.getElementById("news");
    nw.innerHTML = (j.news||[]).slice(0,10).map(n=>`
      <div class="item">
        <a href="${n.url}" target="_blank">${n.title}</a>
        <div class="meta">${n.source} Â· ${n.published_at}</div>
      </div>
    `).join('');

  }catch(e){
    console.error(e);
    document.body.innerHTML = "è®€å–è³‡æ–™éŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚";
  }
}
load();
</script>

</body>
</html>
